%\documentclass[fleqn, 11pt]{article}
\documentclass[11pt,a4paper,oldfontcommands]{memoir}
%\usepackage[danish]{babel}
%\usepackage{boisik}
%\usepackage[T1]{fontenc}
\usepackage{mathtools}
\usepackage{stackengine}
\newcommand\letvdash[1]{\mathrel{
  \stackengine{1.2ex}{\vdash}{\;\;\scriptscriptstyle#1}{O}{c}{F}{T}{L}}}
\stackMath
%\usepackage{stix}
\usepackage{upgreek}%alpha symbol
\usepackage{adjmulticol}
\usepackage[utf8]{inputenc}
% xspace sørger for rigtigt mellemrum efter en kommando-anvendelse
\setlength\parindent{0pt}
\usepackage{xspace}
\usepackage{comment}
\usepackage{multicol}
\usepackage{wasysym}
\usepackage{float}
\usepackage{array}

% Memoir stuff
\usepackage[T1]{fontenc}
\usepackage{microtype}
\usepackage[dvips]{graphicx}
\usepackage[dvipsnames]{xcolor}
\usepackage{times}

\usepackage{listings}
\usepackage{tikz}
\usepackage{pgfplots}
\usepackage{mathrsfs}
\usepgfplotslibrary{external}
\usetikzlibrary{external}
\tikzexternalize[prefix=tikz/]

\usepackage[
breaklinks=true,colorlinks=true,
%linkcolor=blue,urlcolor=blue,citecolor=blue,% PDF VIEW
linkcolor=black,urlcolor=black,citecolor=black,% PRINT
bookmarks=true,bookmarksopenlevel=2]{hyperref}

\usepackage{geometry}
% PDF VIEW
% \geometry{total={210mm,297mm},
% left=25mm,right=25mm,%
% bindingoffset=0mm, top=25mm,bottom=25mm}
% PRINT
\geometry{total={210mm,297mm},
left=20mm,right=20mm,
bindingoffset=10mm, top=25mm,bottom=25mm}

\OnehalfSpacing
%\linespread{1.3}

\usepackage{bm}

%%% CHAPTER'S STYLE
\chapterstyle{bianchi}
%\chapterstyle{ger}
%\chapterstyle{madsen}
%\chapterstyle{ell}
%%% STYLE OF SECTIONS, SUBSECTIONS, AND SUBSUBSECTIONS
\setsecheadstyle{\Large\bfseries\sffamily\raggedright}
\setsubsecheadstyle{\large\bfseries\sffamily\raggedright}
\setsubsubsecheadstyle{\bfseries\sffamily\raggedright}


%%% STYLE OF PAGES NUMBERING
%\pagestyle{companion}\nouppercaseheads 
%\pagestyle{headings}
%\pagestyle{Ruled}
\pagestyle{plain}
\makepagestyle{plain}
\makeevenfoot{plain}{\thepage}{}{}
\makeoddfoot{plain}{}{}{\thepage}
\makeevenhead{plain}{}{}{}
\makeoddhead{plain}{}{}{}


\maxsecnumdepth{subsection} % chapters, sections, and subsections are numbered
\maxtocdepth{subsection} % chapters, sections, and subsections are in the Table of Contents

%Memoir stuff end

%\usepackage{algorithm}
%\usepackage{algpseudocode}
\usepackage{algorithm2e}

%\usepackage{breqn}

% amsmath giver align-environments og meget mere
\usepackage{amsmath}
\newcommand\numberthis{\addtocounter{equation}{1}\tag{\theequation}}
\usepackage{amsthm}

\usepackage{stmaryrd}

\theoremstyle{proposition}
\newtheorem{prop}{Proposition}

\theoremstyle{proposition}
\newtheorem{conj}{Conjecture}[section]


\theoremstyle{definition}
\newtheorem{definition}{Definition}[section]
\newtheorem{exmp}{Example}[section]
\newtheorem{theorem}{Theorem}
\newtheorem{corollary}{Corollary}[theorem]

\theoremstyle{plain}
\newtheorem{lemma}[theorem]{Lemma}

\usepackage{framed}
\theoremstyle{remark}
\newtheorem*{remark}{Remark}

\theoremstyle{definition}
\newtheorem{defi/}{Definition}[section]

\newenvironment{defi}
  {\renewcommand{\qedsymbol}{$\triangleleft$}%
   \pushQED{\qed}\begin{defi/}}
  {\popQED\end{defi/}}

%\theoremstyle{definition}
\newtheorem{examp/}{Example}[section]
\newenvironment{examp}
  {\renewcommand{\qedsymbol}{$\triangleright$}%
   \pushQED{\qed}\begin{examp/}}
  {\popQED\end{examp/}}



% \addtolength{\oddsidemargin}{-.475in}
% \addtolength{\evensidemargin}{-.475in}
% \addtolength{\textwidth}{1.05in}

% amssymb giver mulighed for "fede" symboler i mathmode til N, Z mm.

\usepackage{amssymb}

\usepackage{enumerate}
\usepackage{ebproof}
% Fede mængder

\newcommand{\skat}[1]{\textbf{#1}\xspace}
\newcommand{\EnvV}{\skat{EnvV}}
\newcommand{\Var}{\skat{Var}}
\newcommand{\Store}{\skat{Store}}
\newcommand{\Loc}{\skat{Loc}}

% De hele tal

\newcommand{\Z}{\ensuremath{\mathbb{Z}}}

% Inferensregler

\newcommand{\condinfrule}[3]
          {\parbox{5.5cm}{$$ {\frac{#1}{#2}}{\qquad
            #3} \hfill  $$}}

\newcommand{\infrule}[2]
          {\parbox{4.5cm}{$$ \frac{#1}{#2}\hspace{.5cm}$$}}

% Regelnavne
           
\newcommand{\runa}[1]{\mbox{\textsc{\protect{(#1})}}}
\newcommand{\runatt}[2]{$[{\mbox{\textsc{#1}}}_{\mbox{\textsc{\small
        #2}}}]$\xspace}

% Pile

\newcommand{\ra}[1][\relax]{\ensuremath \rightarrow_{#1}}
\newcommand{\lra}{\longrightarrow}
\newcommand{\Ra}{\Rightarrow}
\newcommand{\pra}{\ensuremath \rightharpoonup }

% Kantede parenteser

\newcommand{\lag}{\langle}
\newcommand{\rag}{\rangle}
\newcommand{\conf}[1]{\ensuremath{\lag #1 \rag}}

% Mængder

\newcommand{\setof}[2]{\ensuremath{\{ #1 \mid #2 \}}}
\newcommand{\set}[1]{\ensuremath{\{ #1 \}}}

% Kommandoer i Bims

\newcommand{\skib}{\texttt{skip}}
%\newcommand{\ifthenelse}[3]{\texttt{if}\; #1 \; \texttt{then}\; #2 \;
%  \texttt{else}\; #3}
%\newcommand{\whiledo}[2]{\texttt{while}\; #1 \; \texttt{do}\; #2}

% Neu commands
\newcommand{\hole}{(\!\mid\mid\!)}
\newcommand{\nehole}[1]{\mathord{(\!\mid\!\!#1\!\!\mid\!)}}
\newcommand{\prerep}{[^{m}\!\!\//_{\!\!D}]}
\newcommand{\replace}[1]{\lbrbrak #1 \rbrbrak}
\newcommand{\cursor}[1]{\mathord{
    \lBrack\mspace{1mu}#1\mspace{1mu}\rBrack
}}
\newcommand{\breakpoint}[1]{
\mathord{
    \lAngle\mspace{1mu}#1\mspace{1mu}\rAngle
}}
\newcommand{\wellformed}[1]{\letvdash{wf}#1}
\newcommand{\complete}[1]{\letvdash{c}#1}
\newcommand{\cursorexc}[1]{\letvdash{ce}#1}
\newcommand{\nodevalid}[1]{\letvdash{nv}#1}
\newcommand{\cursorctx}[1]{C\!\left[#1\right]}
\newcommand{\cursorctxhole}{\left[\cdot\right]}
\newcommand{\recursion}[2]{#1\!\left(#2\right)}
% Next

\newcommand{\nexte}{\textrm{next}\xspace}

\newcommand{\editelig}[1]{\mathcal{E}#1}
\newcommand{\noteditelig}[1]{\overline{\mathcal{E}#1}}

\newcommand{\consistent}[2]{#1 \sim #2}

% Omvendt \vdash
\usepackage{graphicx}

\makeatletter
\providecommand*{\dashv}{%
  \mathrel{%
    \mathpalette\@dashv\vdash
  }%
}
\newcommand*{\@dashv}[2]{%
  \reflectbox{$\m@th#1#2$}%
}

\newcommand{\f}{\mkern-2mu f\mkern-3mu}%fix f i mathmode

\newcommand{\cmdchild}[1]{\texttt{child}\; #1}
\newcommand{\cmdparent}{\texttt{parent}}
\newcommand{\cmdlambda}[1]{\texttt{lambda}\; #1}
\newcommand{\cmdhole}{\texttt{hole}}
\newcommand{\cmdrec}[1]{\texttt{rec}\; #1.}
\newcommand{\cmdapp}{\texttt{app}}
\newcommand{\cmdbreak}{\texttt{break}}


\newcommand{\condexp}[2]{#1 \Rightarrow #2}
\newcommand{\condexpto}[3]{#1 \Rightarrow #2 \vert #3}

\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.95,0.95,0.92}

\lstdefinestyle{mystyle}{
    backgroundcolor=\color{backcolour},   
    commentstyle=\color{codegreen},
    keywordstyle=\color{magenta},
    numberstyle=\tiny\color{codegray},
    stringstyle=\color{codepurple},
    basicstyle=\ttfamily\footnotesize,
    breakatwhitespace=false,         
    breaklines=true,                 
    captionpos=b,                    
    keepspaces=true,                 
    numbers=left,                    
    numbersep=5pt,                  
    showspaces=false,                
    showstringspaces=false,
    showtabs=false,                  
    tabsize=2
}

\lstset{style=mystyle}

\makeatother

% HER KOMMER TITLEN

\usepackage{authblk}

\title{Implementations of Sized Types for Parallel Complexity of Message-passing Processes}

%\usepackage{newpxmath} % math font is Palatino compatible

%\author{Herrmann, Thomas. Lauridsen, Mikkel Korup}

%\def\email#1{{\tt#1}}

\author{Thomas Herrmann}
\author{Mikkel Korup Lauridsen}
\affil{\{therrm17,mkla17\}@student.aau.dk}
%\affil{mkla17@student.aau.dk}
\affil{Department of Computer Science, Aalborg University}
%\affil{Selma Lagerlöfs Vej 300}
\affil{Aalborg, Denmark}
\date{June 17, 2022}
%\affil{Denmark}
%\email{therrm17@student.aau.dk}
%\authornotemark[1]
%\affiliation{%
%  \institution{Department of Computer Science, Aalborg University}
%  \streetaddress{Selma Lagerlöfs Vej 300}
%  \city{Aalborg}
%  \country{Denmark}}
%
%\author[2]{Lauridsen, Mikkel Korup}
%\email{mkla17@student.aau.dk}
%\authornotemark[1]
%\affiliation{%
%  \institution{Department of Computer Science, Aalborg University}
%  \streetaddress{Selma Lagerlöfs Vej 300}
%  \city{Aalborg}
%  \country{Denmark}}

\input{defs}

\begin{document}

\input{sections/summary}
\maketitle

\begin{abstract}
    Type systems using sized types have been studied extensively in the context of complexity analysis of functional and parallel programs to formally express, verify and infer complexity bounds on programs. Recent contributions have extended this study to message-passing processes using behavioral types to bound channel synchronizations, providing a sound framework for parallel complexity of pi-calculus processes. We explore the challenges of implementing this work, and present a type checker and a type inference algorithm. Our type checker can verify complexity analyses of some polynomial- and linear time primitive recursive functions, encoded as replicated channel inputs (servers), by using integer programming to bound channel synchronizations. Comparison of parametric complexities is a partial order, so to bound parallel complexities, we introduce the notion of combined complexity: A set of intersecting parametric complexity bounds. Our type inference algorithm first generates a constraint satisfaction problem on sized input/output types that we reduce to a set of polynomial inequality constraints, a solution to which provides a parametric bound on the parallel complexity of a server. We show how our constraint satisfaction problems can be over-approximated and provide a Haskell implementation using the Z3 SMT solver that can provide reasonable bounds on the parallel complexity of some linear time servers.
    %
    % Complexity analysis has long been a central part of algorithm design and is paramount to determine the efficiency of algorithms and other systems. Existing type systems formalize rules determining the complexity of both functional and parallel programs. We extend the work by Baillot and Ghyselen \cite{BaillotGhyselen2021} and implement both type checking and type inference for their type system for parallel complexity with message-passing processes in the pi-calculus. We show how we determine if a linear constraint is always satisfied given some other constraints using linear programming, which is an important step during type checking. To increase expressiveness, we allow certain polynomial constraints that we can reduce to linear ones. We also introduce algorithmic type rules, where we introduce combined complexities to preserve the subject reduction property. Soundness of the algorithmic type rules is proved. We use a constraint-based system to infer types representing linear bounds. This system is two-phased and sets up constraints based on linear templates that are later reduced into simple constraints on coefficients from the templates. The constraints on coefficients are then checked for satisfiability by an off-the-shelf SMT solver, and types are inferred based on an interpretation of the constraints. We implement type inference in Haskell using Z3 as the SMT solver. We find that we can type check many linear processes and infer bounds for constant and linear time processes in a reasonable amount of time.
\end{abstract}
\clearpage

\text{ }
\vspace{50em}
\section*{Acknowledgments}
We give special thanks to our supervisor Hans Hüttel for his excellent supervision and perspectives. We also thank the people at Kobayashi Laboratory for their hospitality during our stay at the University of Tokyo, and especially Naoki Kobayashi for his excellent guidance and passionate input on type inference.
\clearpage

\setcounter{tocdepth}{1}
\tableofcontents*
\clearpage


\input{sections/introduction}
\input{sections/pi_calculus}
\input{sections/constraint_judgements/intro}
\input{sections/baillotandghyselen/intro}
\input{sections/typecheck/intro}
\input{sections/timeinference/intro}
\input{sections/conclusion}

%
%
\bibliographystyle{compj}
\bibliography{mybib}

\appendix
\input{sections/appendix/soundness1}
\input{sections/appendix/InferenceExample}

%\input{sections/turingcompleteness}
%\appendix
%\input{sections/appendix/lemmas}
%\input{sections/appendix/dasetalsoundness}
\end{document}
%%% Local Variables:
%%% mode: latex
%%% TeX-master: t
%%% End:
